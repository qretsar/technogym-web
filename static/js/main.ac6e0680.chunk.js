(this["webpackJsonptechno-gym"]=this["webpackJsonptechno-gym"]||[]).push([[0],{39:function(e,t,r){},41:function(e,t,r){},58:function(e,t,r){"use strict";r.r(t);var a=r(10),i=r.n(a),c=r(22),n=r.n(c),s=(r(39),r(23)),o=r.n(s),l=r(13),m=r(30),u=r(14),d=(r(41),r.p+"static/media/logo.046decd8.svg"),b=r(33),j=r(17),p=r(59),h=r(24);h.a.initializeApp({apiKey:"AIzaSyDzUaIzLyoD3neqD9xpNvdAvKtfYYt24sc",authDomain:"fitx-app-22416.firebaseapp.com",projectId:"fitx-app-22416",storageBucket:"fitx-app-22416.appspot.com",messagingSenderId:"935101888763",appId:"1:935101888763:web:15cfbcea7413dcc5fdd85e"});var f=h.a,v=r(2),O=function(e){var t=e.form,r=e.setForm,a=e.members,i=e.setMembers,c=e.resetForm,n=(e.setJelena,function(e){var a=e.target.value;r(Object(l.a)(Object(l.a)({},t),{},Object(j.a)({},e.target.name,a)))});return Object(v.jsx)("div",{children:Object(v.jsx)("form",{action:"",className:"form",noValidate:!0,children:Object(v.jsxs)("div",{className:"input-group",children:[Object(v.jsx)("input",{name:"ime",value:t.ime,onChange:n,className:"form-control",type:"text",placeholder:"ime",required:"required"}),Object(v.jsx)("input",{name:"prezime",value:t.prezime,onChange:n,className:"form-control",type:"text",placeholder:"prezime",required:"required"}),Object(v.jsx)("input",{name:"viber",value:t.viber,onChange:n,className:"form-control",type:"number",placeholder:"telefon",required:!0}),Object(v.jsx)("input",{name:"datum",value:t.datum,onChange:n,className:"form-control",type:"date",required:!0}),Object(v.jsx)("input",{name:"uplata",value:t.uplata,onChange:n,className:"form-control",type:"number",placeholder:"uplata",required:!0}),Object(v.jsx)("button",{onClick:function(e){e.preventDefault(),function(){var e=Math.ceil(""===t.uplata?0:t.uplata/30);if(t.ime.length<2||t.prezime.length<2||t.viber.length<6)alert("Ime, prezime i broj telefona su obavezni");else{var r=f.firestore();if(a.some((function(e){return e.ime===t.ime}))){var c=a.map((function(a){return a.ime===t.ime&&(a.expirationDate=Object(p.a)(a.expirationDate,e),r.collection("membersA").doc(a.id).set(Object(l.a)(Object(l.a)({},a),{},{ime:t.ime.trim(),prezime:t.prezime.trim(),viber:t.viber.trim(),expirationDate:Object(p.a)(a.expirationDate,e)}))),a}));console.log("Setuje"),i(c)}else{var n={ime:t.ime.trim(),prezime:t.prezime.trim(),viber:t.viber.trim(),uplata:""===t.uplata?0:t.uplata,datum:""!==t.datum?t.datum:(new Date).toString(),expirationDate:Object(p.a)(new Date(t.datum).getTime(),e),active:!0};i([].concat(Object(b.a)(a),[n])),r.collection("membersA").doc().set(n)}}}(),c()},className:"btn btn-outline-secondary",value:"add",type:"submit",children:"Dodaj"})]})})})},x={usersCount:{display:"flex",justifyContent:"space-around"}},g=function(e){var t=e.members,r=e.setForm,a=e.setStatus,i=e.setSearch,c=e.filteredMembers,n=function(e){return c.filter((function(t){return t.active===e})).length};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"input-group searchdiv",children:[Object(v.jsx)("input",{onClick:function(e){e.target.value="",i("")},onKeyUp:function(e){var a=t.filter((function(t){return t.ime.toLowerCase().includes(e.target.value.toLowerCase())||t.prezime.toLowerCase().includes(e.target.value.toLowerCase())||t.viber.toLowerCase().includes(e.target.value.toLowerCase())}));1===a.length&&r({ime:a[0].ime,prezime:a[0].prezime,viber:a[0].viber}),i(e.target.value),console.log("Filtered : "+a)},type:"text",name:"search",placeholder:"Pretrazi",className:"form-control",id:"search"}),Object(v.jsxs)("select",{onChange:function(e){a(e.target.value)},name:"todos",className:"form-select",children:[Object(v.jsx)("option",{value:"svi",children:"Svi korisnici"}),Object(v.jsx)("option",{value:"aktivni",children:"Aktivni"}),Object(v.jsx)("option",{value:"neaktivni",children:"Neaktivni"})]})]}),Object(v.jsxs)("div",{style:x.usersCount,children:[Object(v.jsxs)("p",{className:"broj-clanova",children:["Ukupan broj korisnika: ",t.length]}),Object(v.jsxs)("p",{className:"broj-clanova",children:["Aktivnih korisnika: ",n(!0)]}),Object(v.jsxs)("p",{className:"broj-clanova",children:["Neaktivnih korisnika: ",n(!1)]})]})]})},N=r(32),y=r.n(N),z=r(60),k=function(e){var t=e.member,r=e.setForm,i=e.filteredMembers,c=e.members,n=e.setMembers,s=e.setSearch,o=e.resetForm,l=Object(a.useState)(!1),m=Object(u.a)(l,2),d=m[0],b=m[1],j=Object(a.useState)({ime:"",prezime:"",viber:"",datum:"",uplata:"",active:""}),p=Object(u.a)(j,2);p[0],p[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(y.a,{isOpen:d,onAfterOpen:function(){},onRequestClose:function(){b(!1)},style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"50vw"}},contentLabel:"Example Modal",children:Object(v.jsxs)("form",{action:"",className:"form",noValidate:!0,children:[Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{for:"ime",class:"col-sm-2",children:Object(v.jsx)("span",{className:"h6 small bg-white text-muted pt-1 pl-2 pr-2",children:"Ime"})}),Object(v.jsx)("input",{name:"ime",defaultValue:t.ime,type:"text",placeholder:"ime",required:"required",className:"form-control mt-n3",id:"ime"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{for:"prezime",class:"col-sm-2",children:Object(v.jsx)("span",{className:"h6 small bg-white text-muted pt-1 pl-2 pr-2",children:"Prezime"})}),Object(v.jsx)("input",{name:"prezime",defaultValue:t.prezime,type:"text",placeholder:"ime",required:"required",className:"form-control mt-n3",id:"prezime"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{for:"datum",class:"col-sm-12",children:Object(v.jsx)("span",{className:"h6 small bg-white text-muted pt-1 pl-2 pr-2",children:"Prva registracija"})}),Object(v.jsx)("input",{name:"datum",defaultValue:t.datum,type:"date",placeholder:"datum",required:"required",className:"form-control mt-n3",id:"datum"})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{for:"valid",class:"col-sm-12",children:Object(v.jsx)("span",{className:"h6 small bg-white text-muted pt-1 pl-2 pr-2",children:"Vredi do"})}),Object(v.jsx)("input",{name:"valid",value:Object(z.a)(t.expirationDate,"dd-MM-yyyy"),type:"text",required:"required",className:"form-control mt-n3",id:"valid"})]}),Object(v.jsx)("button",{children:"Sacuvaj"})]})}),Object(v.jsxs)("tr",{onDoubleClick:function(e){r({ime:t.ime,prezime:t.prezime,instagram:t.instagram,viber:t.viber}),s("")},style:t.active?{background:""}:{background:"rgb(110 110 110)",color:"white"},children:[Object(v.jsx)("td",{children:t.ime}),Object(v.jsx)("td",{children:t.prezime}),Object(v.jsx)("td",{children:t.viber}),Object(v.jsx)("td",{children:Object(z.a)(t.expirationDate,"dd-MM-yyyy")}),Object(v.jsx)("td",{children:Object(v.jsx)("button",{onClick:function(){b(!0)},className:'" btn btn-warning\n          }',children:Object(v.jsx)("i",{className:"fas fa-edit"})})}),Object(v.jsx)("td",{children:Object(v.jsx)("button",{onDoubleClick:function(e){var t=i.findIndex((function(t){return t.viber===e.target.closest("tr").childNodes[2].innerText})),r=i[t].id;f.firestore().collection("membersA").doc(r).delete();var a=c.filter((function(e){return e.id!==r}));n(a),o()},className:'" btn btn-warning\n          }',children:Object(v.jsx)("i",{className:"fas fa-trash"})})})]})]})},w=function(e){var t=e.filteredMembers,r=e.members,a=e.setMembers,i=e.setForm,c=e.resetForm,n=e.setSearch;return Object(v.jsx)("div",{className:"table-responsive",children:Object(v.jsxs)("table",{id:"flip-scroll",className:"table table-striped table-hover",children:[Object(v.jsx)("thead",{className:"thead-light",children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{scope:"col",children:"Ime"}),Object(v.jsx)("th",{scope:"col",children:"Prezime"}),Object(v.jsx)("th",{scope:"col",children:"Telefon"}),Object(v.jsx)("th",{scope:"col",children:"datum isteka"}),Object(v.jsx)("th",{scope:"col",children:"Uredi"}),Object(v.jsx)("th",{scope:"col",children:"Izbri\u0161i"})]})}),Object(v.jsx)("tbody",{children:t.map((function(e){return Object(v.jsx)(k,{member:e,setForm:i,resetForm:c,filteredMembers:t,members:r,setMembers:a,setSearch:n},e.id)}))})]})})};var C=function(){var e=Object(a.useState)({ime:"",prezime:"",instagram:"",viber:"",datum:"",uplata:"",active:""}),t=Object(u.a)(e,2),r=t[0],i=t[1],c=Object(a.useState)([]),n=Object(u.a)(c,2),s=n[0],b=n[1],j=Object(a.useState)("svi"),p=Object(u.a)(j,2),h=p[0],x=p[1],N=Object(a.useState)([]),y=Object(u.a)(N,2),z=y[0],k=y[1],C=Object(a.useState)(""),D=Object(u.a)(C,2),S=D[0],F=D[1],M=function(){var e=Object(m.a)(o.a.mark((function e(t){var r,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.firestore(),e.next=3,r.collection("membersA").get();case 3:a=e.sent,(i=a.docs.map((function(e){return Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id,expirationDate:e.data().expirationDate.toDate()})}))).sort((function(e,t){return e.expirationDate>t.expirationDate?-1:t.expirationDate>e.expirationDate?1:0})),b(i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){M()}),[]),Object(a.useEffect)((function(){var e=s.map((function(e){return e.expirationDate.setHours(0,0,0,0)>(new Date).setHours(0,0,0,0)?Object(l.a)(Object(l.a)({},e),{},{active:!0}):Object(l.a)(Object(l.a)({},e),{},{active:!1})}));switch(h){case"aktivni":k(e.filter((function(e){return!0===e.active})));break;case"neaktivni":k(e.filter((function(e){return!1===e.active})));break;default:k(e)}S.length>0&&(x("svi"),k(e.filter((function(e){return e.ime.toLowerCase().includes(S.toLowerCase())||e.prezime.toLowerCase().includes(S.toLowerCase())||e.viber.toLowerCase().includes(S.toLowerCase())}))))}),[b,s,S,h]);var q=function(){i({ime:"",prezime:"",viber:"",datum:"",uplata:"0",active:""})};return Object(v.jsxs)("div",{className:"container my-5",children:[Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)("img",{src:d,className:"img-fluid",alt:"Responsive"}),Object(v.jsx)("p",{children:"Fitness Studio"})]}),Object(v.jsx)(O,{form:r,setForm:i,members:s,setMembers:b,resetForm:q}),Object(v.jsx)(g,{members:s,setForm:i,setStatus:x,setSearch:F,filteredMembers:z}),Object(v.jsx)(w,{filteredMembers:z,members:s,setMembers:b,setForm:i,setSearch:F,resetForm:q})]})},D=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,61)).then((function(t){var r=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,n=t.getTTFB;r(e),a(e),i(e),c(e),n(e)}))};r(57);n.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(C,{})}),document.getElementById("root")),D()}},[[58,1,2]]]);
//# sourceMappingURL=main.ac6e0680.chunk.js.map